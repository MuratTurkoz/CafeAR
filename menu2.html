<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR Menü Prototipi - Logolu Menü ve Kamera İzni</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- A-Frame ve AR.js CDN -->
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/ar.js/master/aframe/build/aframe-ar.min.js"></script>
</head>
<body class="bg-gray-100">

    <div class="container mx-auto py-10 text-center" id="menu-section">
        <!-- Cafe Logosu ve Menü -->
        <img src="cafe-logo.webp" alt="Cafe Logo" class="mx-auto mb-8 w-32">
        <h1 class="text-3xl font-bold mb-10">Cafe Menü</h1>

        <!-- Menü Seçenekleri -->
             <!-- Kahvaltılıklar -->
        <div class="max-w-lg mx-auto mb-6">
            <div class="bg-white shadow-lg rounded-lg overflow-hidden">
                <button class="w-full bg-blue-500 text-white text-lg py-2 px-4 focus:outline-none"
                    onclick="document.getElementById('kahvaltilar').classList.toggle('hidden'); show3DModel('plate')">
                    Kahvaltılıklar
                </button>
                <div id="kahvaltilar" class="p-4 hidden">
                    <ul class="list-disc pl-6">
                        <li class="py-1">Serpme Kahvaltı - 50 TL</li>
                        <li class="py-1">Omlet - 30 TL</li>
                        <li class="py-1">Menemen - 35 TL</li>
                    </ul>
                </div>
            </div>
        </div>
        <button class="w-full bg-blue-500 text-white text-lg py-2 px-4 focus:outline-none mb-4" 
            onclick="requestCameraPermission('plate')">
            Kahvaltılıklar
        </button>

        <button class="w-full bg-blue-500 text-white text-lg py-2 px-4 focus:outline-none mb-4" 
            onclick="requestCameraPermission('tost')">
            Tostlar
        </button>

        <button class="w-full bg-blue-500 text-white text-lg py-2 px-4 focus:outline-none mb-4" 
            onclick="requestCameraPermission('sandwich')">
            Sandwichler
        </button>
    </div>

    <!-- Bilgilendirme Ekranı -->
    <div id="overlay" class="hidden fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center text-white text-center z-50">
        <div>
            <p id="info-text" class="text-lg mb-4">Kamera izni vermeniz gerekiyor.</p>
            <button class="bg-blue-500 px-4 py-2 rounded" onclick="closeOverlay()">Tamam</button>
        </div>
    </div>

    <!-- AR Scene (Başlangıçta gizli) -->
    <div id="ar-section" class="hidden">
        <a-scene embedded arjs>
            <!-- Tek image tracker (örneğin, cafe logosu) -->
            <a-marker type="pattern" url="path-to-marker-file.patt">
                <!-- Farklı menü seçimleri için model alanı -->
                <a-entity id="3d-model" position="0 0 0" scale="0.5 0.5 0.5" rotation="0 0 0"></a-entity>
            </a-marker>
            <a-entity gltf-model="#plateModel" animation-mixer position="0 0 -3" scale="0.5 0.5 0.5">


            </a-entity>
            <!-- Kamera -->
            <a-entity camera></a-entity>
        </a-scene>
    </div>

    <!-- 3D Model Kaynakları -->
    <a-assets>
        <a-asset-item id="plateModel" src="Models/plate.glb"></a-asset-item>
        <a-asset-item id="tostModel" src="models/tost.glb"></a-asset-item>
        <a-asset-item id="sandwichModel" src="models/sandwich.glb"></a-asset-item>

    </a-assets>

    <!-- JavaScript -->
    <script>
        // Kamera izni isteme fonksiyonu
        function requestCameraPermission(modelType) {
            // Bilgilendirme ekranını aç
            document.getElementById('overlay').classList.remove('hidden');

            // Kamera izni işlemi, menü öğesine tıklanarak başlar
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                navigator.mediaDevices.getUserMedia({ video: true })
                    .then(function() {
                        // Kamera izni verildi, AR bölümünü göster
                        document.getElementById('ar-section').classList.remove('hidden');
                        document.getElementById('menu-section').classList.add('hidden');
                        // Bilgilendirme ekranı kapatılır
                        document.getElementById('overlay').classList.add('hidden');
                        // Seçilen modele göre 3D modeli göster
                        showModel(modelType);
                    })
                    .catch(function() {
                        alert("Kamera izni reddedildi. Devam edebilmek için izni vermeniz gerekiyor.");
                    });
            } else {
                alert("Tarayıcınız kamera izinlerini desteklemiyor.");
            }
        }

        // Model gösterimi
        function showModel(modelType) {
            const model = document.getElementById('3d-model');
            // Seçilen menü öğesine göre modeli göster
            switch (modelType) {
                case 'plate':
                    model.setAttribute('gltf-model', '#plateModel');
                    break;
                case 'tost':
                    model.setAttribute('gltf-model', '#tostModel');
                    break;
                case 'sandwich':
                    model.setAttribute('gltf-model', '#sandwichModel');
                    break;
                default:
                    break;
            }
        }

        // Bilgilendirme ekranını kapat
        function closeOverlay() {
            document.getElementById('overlay').classList.add('hidden');
        }
    </script>
</body>
</html>
